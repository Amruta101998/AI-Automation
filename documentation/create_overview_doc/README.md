# High-Level Documentation Generator

This powerful tool streamlines the creation of high-level documentation for software project directories. It analyzes code modules, generates visual flow maps, and compiles comprehensive documentation, all while keeping track of usage metrics.

## Features

- **AI Enhanced Module Analysis**: Leverages an AI-driven process to analyze each module, using a user-editable prompt high_level_doc_prompt.txt from the AI_Prompts directory. You can adjust the prompt to obtain a variety of module insights such as:
   - Module Name
   - Primary Objectives
   - Key Functions and Roles
   - Important Variables
   - Interactions with Other System Parts
   - Main vs. Supportive Operations
   - Operational Sequence
   - Performance Factors
   - Reusability and Adaptability
   - Usage
   - Assumptions

- **Auto-Retry Logic and Enhanced Error Handling**: Sophisticated error handling and retry mechanisms ensure reliable documentation generation in unstable environments.

- **Visualization with Mermaid.js Flow Maps and Enhanced Syntax Handling**: AI-generated Mermaid.js scripts graphically represent module interactions, now with enhanced handling and validation of Mermaid diagram syntax. 

- **Mermaid CLI Image Conversion**: Converts Mermaid.js diagrams into images for a visual representation of the code architecture.

- **Skippable Files and Directories**: Customizable skip list to ignore specific files and directories during documentation.

- **Comprehensive Documentation**: Generates detailed markdown files for each module and compiles them into an overarching High_Level_Doc, complete with visual flow maps. 

- **Documentation Metrics Logging**: Records the token usage of the bito command, converting word counts to token counts for accurate usage metrics. Data is logged in bito_usage_log.txt.

- **Required Tool and File Verification**: Checks for the presence of necessary tools ("bito", "mmdc") and prompt files before starting the documentation process.

## Supported Languages

Supports Python, C, C++, Java, JavaScript, Go, Rust, Ruby, PHP, and Bash, and is extensible to other languages.

To add support for a new language, simply add the file extension to the following line in the code extraction prompt:

```bash
module_files=$(find "$folder_to_document" -type f \( -name '*.py' -o -name '*.c' -o -name '*.cpp' -o -name '*.java' -o -name '*.js' -o -name '*.go' -o -name '*.rs' -o -name '*.rb' -o -name '*.php' -o -name '*.sh' \))
```

## Prerequisites

Ensure the following tools are installed:

- `bito` : https://github.com/gitbito/CLI

- `mermaidcli` : https://github.com/mermaid-js/mermaid-cli

Also, make sure these prompt files are present in a specified prompt folder (`AI_Prompts` by default):

- `high_level_doc_prompt.txt`
- `mermaid_doc_prompt.txt`
- `fix_mermaid_syntax_prompt.txt`
- `system_introduction_prompt.txt`
- `system_overview_mermaid_update_prompt.txt`

## How to Use

1. **Clone the Repository**: Clone this repository to your local machine.
2. **Set Execution Permissions**: Provide the necessary execution permissions to the script:
   ```bash
   chmod +x createdoc.sh
   ```
3. **Run the Script**: Execute the script by providing the folder you wish to document as an argument:
   ```bash
   ./createdoc.sh <folder_to_document>
   ```

## Output

Upon successful execution, the tool generates a directory named doc_<folder_name>

The directory includes:

- Module Documentation: Individual markdown files for each module, titled <module_name>_Doc.md, detailing the module's purpose, functions, and interactions.

- Aggregated Documentation: A comprehensive markdown file High_Level_Doc.md, which consolidates the documentation from each module. This file also includes SVG format flow maps created by Mermaid.js for a visual overview of module interactions, and a final Full System Flow Map in PNG format generated by code2flow for a broader system perspective.

## Skip List

The Skip List feature enables the exclusion of specific files and directories from the documentation process. By default, the tool ignores common directories like `node_modules` and log files, as well as various temporary or compiled files.

### Updating the Skip List

To customize the Skip List to fit your project's needs, follow these steps:

1. **Open the Script**:
   - Edit the `createdoc.sh` script file in a text editor.

2. **Find the Skip Logic**:
   - Locate the `is_skippable` function, which contains the logic for skipping files and directories.

3. **Adjust the Skip Array**:
   - Within the `is_skippable` function, identify the `skip_dirs_files` array. This array lists the patterns of files and directories to be skipped.
   - To modify the array:
     - Add new patterns by appending strings to the array.
     - Remove existing patterns by deleting the corresponding strings.
   - Example modification:
     ```bash
     local skip_dirs_files=("logs" "node_modules" "dist" "target" "bin" "package-lock.json" "data.json" "build" ".gradle" ".idea" "gradle" "extension.js" "vendor.js" "ngsw.json" "polyfills.js" "init" ".gv" "your_custom_pattern_here")
     ```

4. **Save the Script**:
   - After editing, save the changes to the script file.

5. **Re-run the Script**:
   - Execute the script again to apply the new Skip List settings.

By customizing the Skip List, you gain control over the documentation content, ensuring it's concise, relevant, and tailored to showcase the most significant aspects of your project.